<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Humanizer</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;600&display=swap" rel="stylesheet">

<style>
body{
    font-family:Poppins,sans-serif;
    background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
    color:white;
    margin:0;
    padding:20px;
}

.container{
    max-width:900px;
    margin:auto;
}

.topbar{
    display:flex;
    justify-content:space-between;
    align-items:center;
}

textarea{
    width:100%;
    height:180px;
    border-radius:12px;
    border:none;
    padding:15px;
    font-size:15px;
    resize:none;
    margin-top:10px;
}

.output{
    background:white;
    margin-top:20px;
}

button{
    padding:12px 18px;
    border:none;
    border-radius:10px;
    margin:10px 5px 0 0;
    cursor:pointer;
    font-weight:600;
}

.primary{
    background:#00c6ff;
    color:black;
}

.secondary{
    background:#ffffff20;
    color:white;
}

.loader{
    display:none;
    margin-top:15px;
    font-weight:500;
}

.settingsBox{
    display:none;
    background:#00000055;
    padding:15px;
    border-radius:12px;
    margin-top:10px;
}

input,select{
    width:100%;
    padding:10px;
    border-radius:8px;
    border:none;
    margin-top:5px;
}

footer{
    text-align:center;
    margin-top:30px;
    opacity:0.7;
}
</style>
</head>

<body>

<div class="container">

<div class="topbar">
<h1>ü§ñ AI Humanizer</h1>
<button class="secondary" onclick="toggleSettings()">‚öô Settings</button>
</div>

<div class="settingsBox" id="settingsBox">

<label>OpenRouter API Key</label>
<input type="password" id="apiKeyInput" placeholder="Enter API Key">

<label style="margin-top:10px;">Model ID</label>
<input type="text" id="modelInput" placeholder="deepseek/deepseek-r1:free">

<button class="primary" onclick="saveSettings()">Save Settings</button>

</div>

<textarea id="inputText" placeholder="Paste AI generated text here..."></textarea>

<label>Humanization Strength</label>
<select id="strength">
<option value="light">Light</option>
<option value="medium" selected>Medium</option>
<option value="strong">Strong</option>
</select>

<button class="primary" onclick="humanizeText()">Humanize</button>
<button class="secondary" onclick="copyText()">Copy</button>
<button class="secondary" onclick="clearText()">Clear</button>

<div class="loader" id="loader">‚è≥ Processing...</div>

<textarea id="outputText" class="output" placeholder="Humanized text will appear here..."></textarea>

<footer>Built with ‚ù§Ô∏è by Sachin</footer>

</div>

<script>

const API_URL = "https://openrouter.ai/api/v1/chat/completions";

function toggleSettings(){
    const box = document.getElementById("settingsBox");
    box.style.display = box.style.display === "block" ? "none" : "block";
}

function saveSettings(){
    const key = document.getElementById("apiKeyInput").value.trim();
    const model = document.getElementById("modelInput").value.trim();

    localStorage.setItem("openrouter_api_key", key);
    localStorage.setItem("openrouter_model", model);

    alert("Settings Saved ‚úÖ");
}

function getSettings(){
    return {
        key: localStorage.getItem("openrouter_api_key"),
        model: localStorage.getItem("openrouter_model") || "deepseek/deepseek-r1:free"
    };
}

async function humanizeText(){

    const settings = getSettings();

    if(!settings.key){
        alert("Please add API key in Settings");
        return;
    }

    const input = document.getElementById("inputText").value.trim();

    if(!input){
        alert("Enter text first");
        return;
    }

    const strength = document.getElementById("strength").value;
    const loader = document.getElementById("loader");

    loader.style.display = "block";

    let instruction = "";

    if(strength==="light") instruction="Rewrite slightly more natural.";
    if(strength==="medium") instruction="Rewrite clearly in human natural tone.";
    if(strength==="strong") instruction="Completely rewrite to sound human and conversational.";

    const prompt = `
You are an expert human writer.

${instruction}

Rules:
- Keep meaning same
- Remove AI robotic tone
- Improve readability

Text:
${input}
`;

    try{

        const response = await fetch(API_URL,{
            method:"POST",
            headers:{
                "Authorization":"Bearer " + settings.key,
                "Content-Type":"application/json",
                "HTTP-Referer": window.location.href,
                "X-Title": "AI Humanizer"
            },
            body:JSON.stringify({
                model: settings.model,
                messages:[
                    { role:"user", content: prompt }
                ]
            })
        });

        if(!response.ok){
            const text = await response.text();
            throw new Error(text);
        }

        const data = await response.json();

        const result = data?.choices?.[0]?.message?.content || "No response received";

        document.getElementById("outputText").value = result;

    }catch(error){
        console.error(error);
        alert("Error: " + error.message);
    }

    loader.style.display = "none";
}

function copyText(){
    const output = document.getElementById("outputText");
    output.select();
    document.execCommand("copy");
    alert("Copied!");
}

function clearText(){
    document.getElementById("inputText").value="";
    document.getElementById("outputText").value="";
}

</script>

</body>
</html>
